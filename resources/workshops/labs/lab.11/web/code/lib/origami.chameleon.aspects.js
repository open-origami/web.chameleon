const t="object",e="array",n="function",r="number",o="boolean",i="string",u="undefined",c=".",f=void 0;let s=t=>e=>typeof t[e]!==n,l=t=>e=>typeof t[e]===n,a=t=>t=>"constructor"!==t;function g(g){function p(t){if((t=typeof t===u?g:t)===Object.prototype||t===Array.prototype||t===Function.prototype||t===String.prototype||t===Number.prototype||t===Boolean.prototype||null===t)return[];return[...p(Object.getPrototypeOf(t)),...Object.getOwnPropertyNames(t)].filter((function(t,e,n){return e<=n.indexOf(t)}))}function d(t){return t?t.split(c).reduce((function(t,e){return Array.isArray(t)&&isNaN(e)?t.map((function(t){return t[e]})):t&&t[e]}),g):g}function y(t){const n=d(t);return n instanceof Array?e:typeof n}function h(t){return y(t)===n}function b(t){return y(t)===e}function v(e){return y(e)===t}function O(t){return y(t)===u}function m(t,e){return p().reduce((function(e,n,r){return t(e,g[n],n,g)}),e)}return g=g||{},{at:function(t){if(p().length>t){const e=p()[t];return{key:e,value:d(e)}}},get keys(){return p()},get properties(){return p(g).filter(s(g))},get methods(){return p(g).filter(l(g)).filter(a())},get prototype(){return Object.getPrototypeOf(g)},get:d,set:function(t,e){return t.split(c).reduce((function(t,n,r,o){return t[n]=r<o.length-1?t[n]||{}:e}),g)},has:function(t){return!O(t)},remove:function(t){return t.split(c).reduce((function(t,e,n,r){return n<r.length-1?t?t[e]:f:t&&delete t[e]}),g)},type:y,isFunction:h,isArray:b,isObject:v,isNumber:function(t){return y(t)===r},isBoolean:function(t){return y(t)===o},isString:function(t){return y(t)===i},isPrimitive:function(t){return!(O(t)||v(t)||b(t)||h(t))},isUndefined:O,asArray:function(t){return b(t)?d(t):[d(t)]},asFunction:function(t){return h(t)?d(t):function(){return d(t)}},forEach:function(t){p().forEach((function(e,n){t(g[e],e,g)}))},map:function(t){return m((function(e,n,r){return e[r]=t(n),e}),{})},reduce:m,filter:function(t){return m((function(e,n,r){return t(n)&&(e[r]=n),e}),{})},every:function(t){return m((function(e,n,r){return e&&t(n)}),!0)},some:function(t){return m((function(e,n,r){return e||t(n)}),!1)}}}const p="before",d="after",y="around",h="provided",b="except",v=void 0;function O(t){function e(t){if(t.advisable)return t;const e=function(...n){let r=v;return e.provided.every(t=>t(...n))&&(e.except.some(t=>t(...n))||(r=e.before.reduce((t,e)=>e(...n,t),r),r=e.around.reduce((e,r)=>r(t,...n,e),r),0===e.around.length&&(r=t(...n)),r=e.after.reduce((t,e)=>e(...n,t),r)||r)),r};return e.provided=e.provided||[],e.except=e.except||[],e.before=e.before||[],e.after=e.after||[],e.around=e.around||[],e.advisable=!0,e}function n(e){return function(n){return t.advisable&&(t[e]=t[e].filter((function(t){return t!==n}))),t}}function r(e,n){return n=n||t,function(...t){let r=n(...t);return r===v?r:e(r)}}function o(e){return function(...n){setTimeout((function(){t(...n)}),e||0)}}return t=t||function(){},{fix:function(e){return function(...n){return t.apply(this,n.splice(0,e))}},first:function(...e){return function(...n){return t(...e,...n)}},last:function(...e){return function(...n){return t(...n,...e)}},lCurry:function(){return function e(...n){return n.length>=t.length?t(...n):function(...t){return e(...n,...t)}}()},rCurry:function(){return function e(...n){return n.length>=t.length?t(...n):function(...t){return e(...t,...n)}}()},before:function(n){return(t=e(t)).before.push(n),t},after:function(n){return(t=e(t)).after.push(n),t},around:function(n){return(t=e(t)).around.push(n),t},provided:function(n){return(t=e(t)).provided.push(n),t},except:function(n){return(t=e(t)).except.push(n),t},not:{before:n(p),after:n(d),around:n(y),provided:n(h),except:n(b)},composeWith:r,sequenceWith:function(...t){return t.reduce((function(t,e){return r(e,t)}),t=>t)},fluent:function(e,n){let r=n||function(){};return function(...n){return r(t(...n)),e}},memoize:function(){let e={};return function(...n){return n in e?e[n]:e[n]=t(...n)}},overload:function(...t){return function(...e){return(t.filter((function(t){return t.length===e.length}))[0]||(t=>t))(...e)}},delay:o,forever:function(e){return function(...n){return setInterval((function(){t(...n)}),e||0)}},retry:function(t,e){return function(...t){o(e)(...t)}},defer:function(){return o(0)}}}const m=void 0;function k(t){let e=g(t=(t=t||{}).prototype?t.prototype:t);function n(n,r){return e.isFunction(n)&&(t[n]=t[n].bind(r)),this}function r(e,n){return t[e]=n,this}function o(e){return delete t[e],this}function i(t,e){return e in t&&r(e,t[e]),this}function u(t,e){return i(t,e),k(t).remove(e),this}function c(){return k(Object.getPrototypeOf(t))}function f(e){return Object.getOwnPropertyDescriptor(t,e)}function s(e,n){return function(r,o){return t[r]=O(t[r]).not[e](o),n}}let l={get:function(){return t},bind:n,context:function(e){return g(t).keys.forEach((function(t){n(t,e)})),this},add:r,remove:o,update:function(e,n){return e in t&&r(e,n),this},rename:function(e,n){return e in t&&!(n in t)&&(r(n,t[e]),o(e)),this},copy:i,move:u,mix:function(t,e,r){g(t);const o=r||(t=>t);return g(t).keys.filter(o).filter(t=>"constructor"!==t).forEach((function(r){i(t,r),e&&n(r,e)})),this},clone:function(){return k(Object.assign({},t))},create:function(){return Object.create(t)},copyUp:function(e){return k(c().get()).copy(t,e),this},copyDown:function(t){return i(c().get(),t),this},moveUp:function(e){return k(c().get()).move(t,e),this},moveDown:function(t){return u(c().get(),t),this},prototype:function(e){return e==m?c():function(e){return e=e.prototype?e.prototype:e,Object.setPrototypeOf(t,e),k(t)}(e)},before:function(n,r){return e.isFunction(n)?t[n]=O(t[n]).before(r):function(e,n){n.get=n.get||function(){},n.set=n.set||function(){};let r=f(e);Object.defineProperty(t,e,{get:function(){return n.get(),r.get()},set:function(t){n.set(t),r.set(t)}})}(n,r),this},after:function(n,r){return e.isFunction(n)?t[n]=O(t[n]).after(r):function(e,n){n.get=n.get||function(){},n.set=n.set||function(){};let r=f(e);Object.defineProperty(t,e,{get:function(){let t=n.get();return r.get(),t},set:function(t){r.set(t),n.set(t)}})}(n,r),this},around:function(e,n){return t[e]=O(t[e]).around(n),this},provided:function(e,n){return t[e]=O(t[e]).provided(n),this},except:function(e,n){return t[e]=O(t[e]).except(n),this},property:function(e,n){return n?(function(e,n){Object.defineProperty(t,e,n)}(e,n),this):f(e)},delegate:function(e,n){return t[e]=function(...r){let o=n[e].call(t,...r);return o===n?this:o},this},forward:function(e,n){return t[e]=function(...t){let r=n[e].call(n,...t);return r===n?this:r},this},fProxy:function(){let n={};return e.keys.forEach((function(r){e.isFunction(r)&&(n[r]=function(...e){let o=t[r](...e);return o===t?n:o})})),n},dProxy:function(n){let r={};return e.keys.forEach((function(o){e.isFunction(o)&&(r[o]=function(...e){let i=t[o].apply(n,e);return i===t?r:i})})),r},not:{}};return l.not.before=s("before",l),l.not.after=s("after",l),l.not.around=s("around",l),l.not.provided=s("provided",l),l.not.except=s("except",l),l}const x="get",P="set",E="add",j="remove";const L="get",A="set",w="remove";function C(t){let e={},n=function(t){let e=k(t),n=new WeakMap;function r(t){if(n.has(t))return n.get(t);{function e(...e){e.pop(),t(...e)}return n.set(t,e),e}}return{bind:function(t,n){let o=r(n);t===P?(e.after(E,o),e.after(P,o)):e.after(t,o)},unbind:function(n,o){let i=o&&r(o);n===P?(o&&e.not.after(E,i),o&&e.not.after(P,i),!o&&(t[E].after=[]),!o&&(t[P].after=[])):(o&&e.not.after(n,i),!o&&(t[n].after=[]))},reset:function(){t[x].after=[],t[P].after=[],t[E].after=[],t[j].after=[]}}}(t);return e.get=function(t){return n.bind(L,t),e},e.set=function(t){return n.bind(A,t),e},e.remove=function(t){return n.bind(w,t),e},e.reset=n.reset,e.not={},e.not.get=function(t){return n.unbind(L,t),e},e.not.set=function(t){return n.unbind(A,t),e},e.not.remove=function(t){return n.unbind(w,t),e},e}const{isArray:F}=Array;function D(){let t=window,e=(t.Origami=t.Origami||{},t.Origami.Whale=t.Origami.Whale||{},t.Origami.Whale.Store=t.Origami.Whale.Store||function(t){let e=new Map,n=t||new Map,r={config:function(t){return t.store&&(e=new Map(Object.entries(t.store))),t.parent&&(n=t.parent),this},get:function(t){let r=e.get(t),o=n.get(t);return r&&r||o&&o||r},set:function(t,n){return e.set(t,n),this},add:function(t,n){let r=e.get(t);return F(r)?e.set(t,[...r,n]):e.set(t,[n]),this},keys:function(){let t=new Set,r=e.keys(),o=n.keys();for(let e of o)t.add(e);for(let e of r)t.add(e);return[...t]},has:function(t,n){let r=e.get(t);return F(r)?r.includes(n):void 0!==r},remove:function(t,n){let r=t=>void 0!==t;return r(t)&&r(n)&&function(t,n){let r=e.get(t),o=F(r),i=o&&r.filter(t=>t!==n);o&&e.set(t,i)}(t,n),r(t)&&!r(n)&&function(t){e.delete(t)}(t),!r(t)&&!r(n)&&e.clear(),this}};return r.hooks=C(r),r}(),t.Origami.Whale.Store);return{get:function(t){return e.get(t)},set:function(t,n){e.set(t,n)},keys:function(){return e.keys()},remove:function(t){e.remove(t)}}}const H=function(){let t=D();return{key:function(e){return t.get(e)},keys:function(){return t.keys()},define:function(e){for(let n in e){let r=e[n];t.set(n,r)}return this},undefine:function(e){if(e)for(let n in e)t.remove(n);else t.remove();return this}}}();var S={"Logger.Labels.Debug":"[DEBUG]","Logger.Labels.Info":" [INFO]","Logger.Labels.Warn":" [WARN]","Logger.Labels.Error":"[ERROR]","Logger.Labels.Fatal":"[FATAL]","Logger.Levels.Debug":1,"Logger.Levels.Info":2,"Logger.Levels.Warn":3,"Logger.Levels.Error":4,"Logger.Levels.Fatal":5,"Logger.Config.Format":"@Label @Target @Prefix - @Message","Logger.Config.Prefix":"","Logger.Config.Level":3};var W={install:function(){H.define(S)},uninstall:function(){H.undefine(S)}};function M(t,e){return function(n,...r){let o=H.key("Logger.Config.Level");n>=(t.level||o)&&e(n,...r)}}const I=H.key("Logger.Labels.Debug"),N=H.key("Logger.Labels.Info"),R=H.key("Logger.Labels.Warn"),B=H.key("Logger.Labels.Error"),T=H.key("Logger.Labels.Fatal"),U="",K=" ",q=[I,N,R,B,T];function z(t,e){return function(n,...r){let o=H.key("Logger.Config.Format")||U,i=H.key("Logger.Config.Prefix")||U,u=(H.key("Logger.Config.Level"),t.level,r.join(K)),c=q[n-1],f=t.Key,s=o;s=(s=(s=(s=s.replace("@Label",c)).replace("@Prefix",i)).replace("@Target",f)).replace("@Message",u),e(n,s)}}const G=console;function J(t,e){return function(t,...n){G.log(...n),e(t,...n)}}function Q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function V(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const X=H.key("Logger.Levels.Debug"),Y=H.key("Logger.Levels.Info"),Z=H.key("Logger.Levels.Warn"),$=H.key("Logger.Levels.Error"),_=H.key("Logger.Levels.Fatal");function tt(t,e){let n=e||{},r=n.filters,o=function(t){let e=[];return{filter:function(t){return(0,Array.isArray)(t)&&(e=[...e,...t]),(t=>"function"==typeof t)(t)&&(e=[...e,t]),this},create:function(){let n=[...e].reverse(),r=function(){};return function(...e){return n.reduce((function(e,n){return n(t,e)}),r)(...e)}}}}(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Q(n,!0).forEach((function(e){V(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},n,{Key:t})).filter(M).filter(z).filter(J).filter(r).create();return{debug:function(...t){o(X,...t)},info:function(...t){o(Y,...t)},warn:function(...t){o(Z,...t)},fatal:function(...t){o(_,...t)},error:function(...t){o($,...t)}}}var et={"Core.Id":"Core.Id","Core.Family":"Core.Family","Core.Family.Component":"Component","Core.Family.Extension":"Extension","Core.Family.Model":"Model","Core.Extensions.Pending":"Core.Extensions.Pending","Core.Extensions.Installed":"Core.Extensions.Installed"},nt={"Extension.Model":"Extension.Model","Extension.Provider":"Extension.Provider"};const rt="origami.chameleon",ot="Package successfully installed",it="Package successfully uninstalled";var ut=function(){const t=tt(rt);return{install:function(){H.define(et),H.define(nt),t.info(ot)},uninstall:function(){H.undefine(et),H.undefine(nt),t.info(it)}}}(),ct={"Extension.Aspect.Hooks":"Extension.Aspect.Hooks","Extension.Aspect.Hooks.Provided":"Provided","Extension.Aspect.Hooks.Except":"Except","Extension.Aspect.Hooks.Before":"Before","Extension.Aspect.Hooks.After":"After","Extension.Aspect.Hooks.Around":"Around"};const ft="origami.chameleon.aspects",st="Package successfully installed",lt="Package successfully uninstalled";var at=function(){const t=tt(ft);return{install:function(){H.define(ct),t.info(st)},uninstall:function(){H.undefine(ct),t.info(lt)}}}();W.install(),ut.install(),at.install();const gt="function",pt="class";const{isFunction:dt,isClass:yt,isProperty:ht,isMethod:bt,isDescriptor:vt}=function(){function t(t){return typeof t===gt}return{isFunction:t,isClass:function(t){return t.toString().startsWith(pt)},isProperty:function(t){return t&&(t.get||t.set)},isMethod:function(e){return e&&e.value&&t(e.value)},isDescriptor:function(t){return t&&(t.value||t.get||t.set)}}}();function Ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function mt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ot(n,!0).forEach((function(e){kt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ot(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function kt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xt(t){return function(e,n,r){if(bt(r)){let o=e.constructor,i=t(o,n,r),u=r;return dt(i)&&(u=mt({},u,{value:i})),vt(i)&&(u=mt({},u,{},i)),Reflect.defineProperty(e,n,u),u}}}function Pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Et(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const{isArray:jt}=Array;function Lt(t){let e={},n=g(e),r=g(t);let o={config:function(t){return r=t.parent||r,e=t.store||e,n=g(e),this},get:function(t){return n.has(t)?n.isObject(t)?function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pt(n,!0).forEach((function(e){Et(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},r.get(t),{},n.get(t)):n.get(t):r.get(t)},set:function(t,e){return n.set(t,e),this},add:function(t,e){let r=n.get(t);return jt(r)?n.set(t,[...r,e]):n.set(t,[e]),this},keys:function(t){let e=!!t,r=n.has(t);return e&&r?g(n.get(t)).keys:g(n.get()).keys},has:function(t,e){let r=n.get(t);return jt(r)?r.includes(e):void 0!==r},remove:function(t,e){let r=t=>void 0!==t;function o(t){n.remove(t)}return r(t)&&r(e)&&function(t,e){let r=n.get(t),o=jt(r),i=o&&r.filter(t=>t!==e);o&&n.set(t,i)}(t,e),r(t)&&!r(e)&&o(t),!r(t)&&!r(e)&&function(){let t=n.keys;for(let e of t)o(e)}(),this}};return o.hooks=C(o),o}const At="class",wt="object";function Ct(t){function e(t){return t.toString().startsWith(At)}return{get object(){return function(t){return e(t)?t.prototype:t}(t)},get class(){return function(t){return e(t)?t:Reflect.getPrototypeOf(t).constructor}(t)},get isObject(){return function(t){return typeof t===wt}(t)},get isClass(){return e(t)}}}const Ft=window;var Dt=(Ft.Origami=Ft.Origami||{},Ft.Origami.Chameleon=Ft.Origami.Chameleon||{},Ft.Origami.Chameleon.Store=Ft.Origami.Chameleon.Store||new WeakMap,Ft.Origami.Chameleon.Store);function Ht(t){return qt(t).registry}const St=H.key("Core.Extensions.Pending");let Wt=t=>Ct(t).isObject,Mt=t=>t;function It(t){return function(e){return{install:function(n){if(Wt(e))t(e).install(n);else{Ht(Mt(e)).add(St,n)}return this},uninstall:function(n){if(Wt(e))t(e).uninstall(n);else{Ht(Mt(e)).remove(St,n)}return this}}}}const Nt=H.key("Core.Extensions.Installed");function Rt(t){let e=Ht(t);function n(t){let n=e.get(Nt)||[];return t?n.find((t=>e=>e.class===t)(t)):n}function r(t){return!!n(t)}return{create:function(o){if(r(o))return n(o);{let n=function(t){return{create:function(e){let n=new e(t),r=!0;return{get core(){return t},get class(){return e},get provider(){return n},isOn:()=>r,on(){r=!0},off(){r=!1}}}}}(t).create(o);return e.add(Nt,n),n}},get:n,has:r,remove:function(t){let r=n(t);r&&e.remove(Nt,r)}}}function Bt(t){return function(e){let n=function(t){return function(e){return Rt(t).has(e)}}(e),r=t(e);return{install:function(t){return!n(t)&&r.install(t),this},uninstall:function(t){return n(t)&&r.uninstall(t),this}}}}function Tt(t){return function(e){let n=Rt(e),r=t(e);return{install:function(t){return n.create(t).provider.install(),r.install(t),this},uninstall:function(t){if(n.has(t)){n.get(t).provider.uninstall(),n.remove(t),r.uninstall(t)}return this}}}}const Ut=H.key("Extension.Provider");function Kt(t){return function(e){let n=t(e);function r(t){return Ht(t).has(Ut)}function o(t){return Ht(t).get(Ut)}return{install:function(t){return r(t)&&(t=o(t)),!r(t)&&n.install(t),this},uninstall:function(t){return r(t)&&(t=o(t)),!r(t)&&n.uninstall(t),this}}}}function qt(t){return{get registry(){return function(t){let e=Ct(t).object,n=Dt.get(e)||Lt();return Dt.set(e,n),n}(t)},get core(){return{get type(){return{}},get dom(){return{}},get reactive(){return{}},get style(){return{}}}},get extensions(){return function(t){let e=function(t){let e=[];return{filter:function(t){return t&&e.push(t),this},create:function(){return[...e].reverse().reduce((function(t,e){return e(t)}),(function(t){return{install(){return this},uninstall(){return this}}}))(t)}}}(t).filter(It).filter(Kt).filter(Bt).filter(Tt).create();return{install:function(t){return e.install(t),this},uninstall:function(t){return e.uninstall(t),this}}}(t)}}}function zt(t){return qt(t).registry}const Gt=H.key("Extension.Aspect.Hooks");function Jt(t){let e=zt(t);function n(t){let n=e.get(Gt)||[],r={};if(t){for(let e of n){let n=e.exp,o=e.hook,i=e.handler,u=new RegExp(n).test(t);u&&(r[o]=r[o]||[]),u&&r[o].push(i)}return r}return n}return{get:n,set:function(n,r,o){let i=t.prototype[r],u={get key(){return r},get exp(){return n},get hook(){return o},get handler(){return i}};return e.add(Gt,u),u},has:function(t){let e=n(t);return t&&!!Object.keys(e).length||!t&&!!e.length},remove:function(t){let n=(e.get(Gt)||[]).filter((t=>({key:e})=>t!==e)(t));e.set(Gt,n)}}}const Qt=H.key("Extension.Aspect.Hooks.Provided");function Vt(t){return xt((function(e,n){Jt(e).set(t,n,Qt)}))}const Xt=H.key("Extension.Aspect.Hooks.Except");function Yt(t){return xt((function(e,n){Jt(e).set(t,n,Xt)}))}const Zt=H.key("Extension.Aspect.Hooks.Before");function $t(t){return xt((function(e,n){Jt(e).set(t,n,Zt)}))}const _t=H.key("Extension.Aspect.Hooks.After");function te(t){return xt((function(e,n){Jt(e).set(t,n,_t)}))}const ee=H.key("Extension.Aspect.Hooks.Around");function ne(t){return xt((function(e,n){Jt(e).set(t,n,ee)}))}const re=H.key("Core.Id"),oe=H.key("Core.Family"),ie=H.key("Core.Family.Model"),ue=(ce=function(t){let e=t.name,n=ie;Ht(t).set(re,e).set(oe,n)},function(t){return ce(t)});var ce;const fe=H.key("Core.Extensions.Installed");function se(t){return function(e){let n=zt(t).get(fe)||[];return e?n.find((t=>e=>e.provider.ext===t)(e)):n}}let le=t=>e=>t.length<e.length;const ae=H.key("Extension.Aspect.Hooks.Provided"),ge=H.key("Extension.Aspect.Hooks.Except"),pe=H.key("Extension.Aspect.Hooks.Before"),de=H.key("Extension.Aspect.Hooks.After"),ye=H.key("Extension.Aspect.Hooks.Around");let he=t=>t.provider.class;function be(t,e){let n=se(t)(e),r=Jt(he(n));return function(o){let i=t[o],u=r.get(o),c=n.isOn;return function(...t){let n=function(t){return function(e=[],n){return function(...r){let o=!0;for(let i of e)o=o&&i.call(t,...r,n);return o}}}(e)(u[ae],o),r=function(t){return function(e=[],n){return function(...r){let o=!1;for(let i of e)o=o||i.call(t,...r,n);return!o}}}(e)(u[ge],o),f=function(t){return function(e=[],n){return function(...r){let o;for(let i of e)o=i.call(t,...r,o,n);return o}}}(e)(u[pe],o),s=function(t){return function(e=[],n){return function(...r){let o;for(let i of e)o=i.call(t,...r,o,n);return o}}}(e)(u[de],o),l=function(t){return function(e=[],n,r,o){let i=[...e].reverse();return function(...e){let u=r.bind(o),c=le(e);for(let e of i){let r=u;u=function(...o){return c(o)&&e.call(t,r,...o)||!c(o)&&e.call(t,r,...o,n)}}return u(...e)}}}(e)(u[ye],o,i,this);if(!c())return i.call(this,...t);if(n(...t)&&r(...t)){let e=f(...t),n=l(...t);return s(...t,n)||n||e}}}}let ve=t=>t.provider.class,Oe=(t,e)=>n=>e[n]!==t.aspect.in[n],me=t=>e=>"function"==typeof t[e],ke=t=>t=>"constructor"!==t;function xe(t){let e=se(t);function n(t){if(null===t)return[];if(t===Object.prototype)return[];return[...n(Reflect.getPrototypeOf(t))||[],...Object.getOwnPropertyNames(t)||[]].filter(me(t)).filter(ke())}return{create:function(r){let o=e(r),i=ve(o),u=function(t,e){let n=be(t,e);return function(t){return n(t)}}(t,r),c=Jt(i).has;o.aspect={},o.aspect.locus=t,o.aspect.in={},o.aspect.out={};let f={};for(let e of n(t))if(c(e)){let n=t[e],r=u(e);f[e]=r,o.aspect.out[e]=n,o.aspect.in[e]=r}Object.assign(t,f),o.on()},destroy:function(r){let o=e(r),i=(ve(o),Oe(o,t));for(let e of n(t))if(!i(e)){let n=o.aspect.out[e];t[e]=n,!t[e]&&delete t[e]}o.off()}}}var Pe;let Ee=tt("origami.chameleon.aspects"),je=ue(Pe=class{constructor(t){this.aspect=xe(t)}install(t){this.aspect.create(t),Ee.info("Extension successfully installed")}uninstall(t){this.aspect.destroy(t),Ee.info("Extension successfully uninstalled")}})||Pe;export{te as After,ne as Around,je as Aspect,$t as Before,Yt as Except,Vt as Provided};